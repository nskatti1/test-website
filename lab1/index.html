

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Lab 1: The Artemis Board and Bluetooth &mdash; Fast Robots ECE 4160  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=187304be"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex/" />
    <link rel="search" title="Search" href="../search/" />
    <link rel="prev" title="Fast Robots ECE 4160" href="../" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../" class="icon icon-home">
            Fast Robots ECE 4160
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search/" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Lab 1: The Artemis Board and Bluetooth</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="#lab-1a">Lab 1A</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#blink">Blink</a></li>
<li class="toctree-l3"><a class="reference internal" href="#serial">Serial</a></li>
<li class="toctree-l3"><a class="reference internal" href="#temperature">Temperature</a></li>
<li class="toctree-l3"><a class="reference internal" href="#microphone">Microphone</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#lab-1b">Lab 1B</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#prelab">Prelab</a></li>
<li class="toctree-l3"><a class="reference internal" href="#lab-tasks">Lab Tasks</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#echo">1. Echo</a></li>
<li class="toctree-l4"><a class="reference internal" href="#send-three-floats">2. Send Three Floats</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-time-millis">3. Get Time Millis</a></li>
<li class="toctree-l4"><a class="reference internal" href="#notification-handler">4. Notification Handler</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-time-millis-loop">5. GET_TIME_MILLIS_LOOP</a></li>
<li class="toctree-l4"><a class="reference internal" href="#send-time-data">6. SEND_TIME_DATA</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-temp-readings">7. GET_TEMP_READINGS</a></li>
<li class="toctree-l4"><a class="reference internal" href="#lab-question">8. LAB QUESTION</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#reflection">Reflection</a></li>
<li class="toctree-l2"><a class="reference internal" href="#acknowledgements">Acknowledgements</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../">Fast Robots ECE 4160</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Lab 1: The Artemis Board and Bluetooth</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/lab1.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="lab-1-the-artemis-board-and-bluetooth">
<h1>Lab 1: The Artemis Board and Bluetooth<a class="headerlink" href="#lab-1-the-artemis-board-and-bluetooth" title="Link to this heading"></a></h1>
<nav class="contents local" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#overview" id="id7">Overview</a></p></li>
<li><p><a class="reference internal" href="#lab-1a" id="id8">Lab 1A</a></p>
<ul>
<li><p><a class="reference internal" href="#blink" id="id9">Blink</a></p></li>
<li><p><a class="reference internal" href="#serial" id="id10">Serial</a></p></li>
<li><p><a class="reference internal" href="#temperature" id="id11">Temperature</a></p></li>
<li><p><a class="reference internal" href="#microphone" id="id12">Microphone</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#lab-1b" id="id13">Lab 1B</a></p>
<ul>
<li><p><a class="reference internal" href="#prelab" id="id14">Prelab</a></p></li>
<li><p><a class="reference internal" href="#lab-tasks" id="id15">Lab Tasks</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#reflection" id="id16">Reflection</a></p></li>
<li><p><a class="reference internal" href="#acknowledgements" id="id17">Acknowledgements</a></p></li>
</ul>
</nav>
<section id="overview">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">Overview</a><a class="headerlink" href="#overview" title="Link to this heading"></a></h2>
<p>In this lab, we explored the SparkFun RedBoard Artemis Nano, focusing on its integration with the Arduino IDE and Bluetooth Low Energy (BLE) communication.</p>
</section>
<section id="lab-1a">
<h2><a class="toc-backref" href="#id8" role="doc-backlink">Lab 1A</a><a class="headerlink" href="#lab-1a" title="Link to this heading"></a></h2>
<section id="blink">
<h3><a class="toc-backref" href="#id9" role="doc-backlink">Blink</a><a class="headerlink" href="#blink" title="Link to this heading"></a></h3>
<p>I started with the example “Blink” program to confirm that I could successfully program the board and control the on-board LED.</p>
</section>
<section id="serial">
<h3><a class="toc-backref" href="#id10" role="doc-backlink">Serial</a><a class="headerlink" href="#serial" title="Link to this heading"></a></h3>
<p>After verifying basic programming functionality, I used the “Serial” example to test data communication between the board and a serial monitor, ensuring that input data was correctly echoed back.</p>
<a class="bottompadding image-border reference internal image-reference" href="../_images/IMG_20250212_072507066.jpg"><img alt="../_images/IMG_20250212_072507066.jpg" class="bottompadding image-border align-center" src="../_images/IMG_20250212_072507066.jpg" style="width: 50%;" />
</a>
</section>
<section id="temperature">
<h3><a class="toc-backref" href="#id11" role="doc-backlink">Temperature</a><a class="headerlink" href="#temperature" title="Link to this heading"></a></h3>
<p>The “Analog Read” example demonstrated that sensor data, specifically from the temperature sensor, could be collected.</p>
</section>
<section id="microphone">
<h3><a class="toc-backref" href="#id12" role="doc-backlink">Microphone</a><a class="headerlink" href="#microphone" title="Link to this heading"></a></h3>
<p>Additionally, the “Microphone” example showed how I could access and process microphone data for frequency analysis.</p>
</section>
</section>
<section id="lab-1b">
<h2><a class="toc-backref" href="#id13" role="doc-backlink">Lab 1B</a><a class="headerlink" href="#lab-1b" title="Link to this heading"></a></h2>
<section id="prelab">
<h3><a class="toc-backref" href="#id14" role="doc-backlink">Prelab</a><a class="headerlink" href="#prelab" title="Link to this heading"></a></h3>
<p>In this section, I focused on establishing Bluetooth Low Energy (BLE) communication with the Artemis board using the ArduinoBLE library.
I interfaced with it using Python via the bleak module, which required setting up a virtual environment and installing the necessary packages:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python3<span class="w"> </span>-m<span class="w"> </span>venv<span class="w"> </span>FastRobots_ble
.<span class="se">\F</span>astRobots_ble<span class="se">\S</span>cripts<span class="se">\a</span>ctivate
pip<span class="w"> </span>install<span class="w"> </span>numpy<span class="w"> </span>pyyaml<span class="w"> </span>colorama<span class="w"> </span>nest_asyncio<span class="w"> </span>bleak<span class="w"> </span>jupyterlab
</pre></div>
</div>
<p>To enable BLE communication, I first identified the board’s unique MAC Address using the ble_arduino.ino sketch.
This MAC Address was then updated in connections.yaml to establish a proper connection.</p>
<a class="bottompadding image-border reference internal image-reference" href="../_images/connections.png"><img alt="../_images/connections.png" class="bottompadding image-border align-center" src="../_images/connections.png" style="width: 50%;" />
</a>
<p>Additionally, I generated a UUID for the Bluetooth service using Python:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">uuid</span><span class="w"> </span><span class="kn">import</span> <span class="n">uuid4</span>
<span class="n">uuid4</span><span class="p">()</span>
</pre></div>
</div>
<p>After updating both connections.yaml and ble_arduino.ino, I was able to establish a BLE connection using helper functions provided by the course libraries.
I had a lot of issues in this part and had to double check my python installations. Then I realized my bluetooth was not on :/. That solved my issues.</p>
</section>
<section id="lab-tasks">
<h3><a class="toc-backref" href="#id15" role="doc-backlink">Lab Tasks</a><a class="headerlink" href="#lab-tasks" title="Link to this heading"></a></h3>
<section id="echo">
<h4>1. Echo<a class="headerlink" href="#echo" title="Link to this heading"></a></h4>
<p>The ECHO command receives a string from Python, modifies it, and returns the altered string. The modified string is also printed via serial output and is kind of like an “echo”.</p>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">Case Statement for <code class="docutils literal notranslate"><span class="pre">ECHO</span></code></span><a class="headerlink" href="#id1" title="Link to this code"></a></div>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">case</span><span class="w"> </span><span class="no">ECHO</span><span class="p">:</span>

<span class="w">         </span><span class="kt">char</span><span class="w"> </span><span class="n">char_arr</span><span class="p">[</span><span class="n">MAX_MSG_SIZE</span><span class="p">];</span>

<span class="w">         </span><span class="c1">// Extract the next value from the command string as a character array</span>
<span class="w">         </span><span class="n">success</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">robot_cmd</span><span class="p">.</span><span class="n">get_next_value</span><span class="p">(</span><span class="n">char_arr</span><span class="p">);</span>
<span class="w">         </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">success</span><span class="p">)</span>
<span class="w">             </span><span class="k">return</span><span class="p">;</span>

<span class="w">         </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">val</span><span class="p">;</span>

<span class="w">         </span><span class="c1">//Serial.println(&quot;Robot says -&gt; &quot;, );</span>
<span class="w">         </span><span class="n">tx_estring_value</span><span class="p">.</span><span class="n">clear</span><span class="p">();</span>
<span class="w">         </span><span class="n">tx_estring_value</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">char_arr</span><span class="p">);</span>
<span class="w">         </span><span class="n">val</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tx_estring_value</span><span class="p">.</span><span class="n">c_str</span><span class="p">();</span>
<span class="w">         </span><span class="n">tx_characteristic_string</span><span class="p">.</span><span class="n">writeValue</span><span class="p">(</span><span class="n">val</span><span class="p">);</span>
<span class="w">         </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;Robot says -&gt; &quot;</span><span class="p">);</span>
<span class="w">         </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">val</span><span class="p">);</span>
<span class="w">         </span><span class="k">break</span><span class="p">;</span>
</pre></div>
</div>
</div>
<p>See image below in section 2</p>
</section>
<section id="send-three-floats">
<h4>2. Send Three Floats<a class="headerlink" href="#send-three-floats" title="Link to this heading"></a></h4>
<p>The SEND_THREE_FLOATS command functions similarly to ECHO, but it processes three float arguments instead of a single string.
The code I wrote was based on and partially copied from the example command SEND_TWO_INTS</p>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">Case Statement for <code class="docutils literal notranslate"><span class="pre">SEND_THREE_FLOATS</span></code></span><a class="headerlink" href="#id2" title="Link to this code"></a></div>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="w">     </span><span class="k">case</span><span class="w"> </span><span class="no">SEND_THREE_FLOATS</span><span class="p">:</span>
<span class="w">         </span><span class="kt">float</span><span class="w"> </span><span class="n">float_a</span><span class="p">,</span><span class="w"> </span><span class="n">float_b</span><span class="p">,</span><span class="w"> </span><span class="n">float_c</span><span class="p">;</span>

<span class="w">         </span><span class="c1">// Extract the next value from the command string as an integer</span>
<span class="w">         </span><span class="n">success</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">robot_cmd</span><span class="p">.</span><span class="n">get_next_value</span><span class="p">(</span><span class="n">float_a</span><span class="p">);</span>
<span class="w">         </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">success</span><span class="p">)</span>
<span class="w">             </span><span class="k">return</span><span class="p">;</span>

<span class="w">         </span><span class="c1">// Extract the next value from the command string as an integer</span>
<span class="w">         </span><span class="n">success</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">robot_cmd</span><span class="p">.</span><span class="n">get_next_value</span><span class="p">(</span><span class="n">float_b</span><span class="p">);</span>
<span class="w">         </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">success</span><span class="p">)</span>
<span class="w">             </span><span class="k">return</span><span class="p">;</span>
<span class="w">         </span><span class="n">success</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">robot_cmd</span><span class="p">.</span><span class="n">get_next_value</span><span class="p">(</span><span class="n">float_c</span><span class="p">);</span>
<span class="w">         </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">success</span><span class="p">)</span>
<span class="w">             </span><span class="k">return</span><span class="p">;</span>

<span class="w">         </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;Three Integers: &quot;</span><span class="p">);</span>
<span class="w">         </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">float_a</span><span class="p">);</span>
<span class="w">         </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;, &quot;</span><span class="p">);</span>
<span class="w">         </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">float_b</span><span class="p">);</span>
<span class="w">         </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;, &quot;</span><span class="p">);</span>
<span class="w">         </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">float_c</span><span class="p">);</span>

<span class="w">         </span><span class="k">break</span><span class="p">;</span>
</pre></div>
</div>
</div>
<a class="bottompadding image-border reference internal image-reference" href="../_images/echoand3valtogether.png"><img alt="../_images/echoand3valtogether.png" class="bottompadding image-border align-center" src="../_images/echoand3valtogether.png" style="width: 50%;" />
</a>
<p>The photo above shows the inputs from the python side sending the commands.
The photo below shows the serial monitor showing that it received the commands.</p>
<a class="bottompadding image-border reference internal image-reference" href="../_images/send3echo.png"><img alt="../_images/send3echo.png" class="bottompadding image-border align-center" src="../_images/send3echo.png" style="width: 50%;" />
</a>
</section>
<section id="get-time-millis">
<h4>3. Get Time Millis<a class="headerlink" href="#get-time-millis" title="Link to this heading"></a></h4>
<p>The GET_TIME_MILLIS command returns the current time in the format T:123456, obtained using the millis() function.</p>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-text">Case Statement for <code class="docutils literal notranslate"><span class="pre">GET_TIME_MILLIS</span></code></span><a class="headerlink" href="#id3" title="Link to this code"></a></div>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="w">     </span><span class="k">case</span><span class="w"> </span><span class="no">GET_TIME_MILLIS</span><span class="p">:</span>
<span class="w">     </span><span class="cm">/*</span>
<span class="cm">       gets time</span>
<span class="cm">     */</span>
<span class="w">         </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">time_val</span><span class="p">;</span>

<span class="w">         </span><span class="n">tx_estring_value</span><span class="p">.</span><span class="n">clear</span><span class="p">();</span>
<span class="w">         </span><span class="n">tx_estring_value</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;Time: &quot;</span><span class="p">);</span>
<span class="w">         </span><span class="n">tx_estring_value</span><span class="p">.</span><span class="n">append</span><span class="p">((</span><span class="kt">double</span><span class="p">)</span><span class="n">millis</span><span class="p">());</span>
<span class="w">         </span><span class="n">time_val</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tx_estring_value</span><span class="p">.</span><span class="n">c_str</span><span class="p">();</span>
<span class="w">         </span><span class="n">tx_characteristic_string</span><span class="p">.</span><span class="n">writeValue</span><span class="p">(</span><span class="n">time_val</span><span class="p">);</span>
<span class="w">         </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">time_val</span><span class="p">);</span>
<span class="w">         </span><span class="k">break</span><span class="p">;</span>
</pre></div>
</div>
</div>
<p>See image below in section 5</p>
</section>
<section id="notification-handler">
<h4>4. Notification Handler<a class="headerlink" href="#notification-handler" title="Link to this heading"></a></h4>
<p>To parse the data being sent appropriately(and also follow lab instructions), I implemented a notification handler. I originally wrote much more complicated code, but then revised it after adding
steps 6 and 7 to be a little more simpler.</p>
<div class="literal-block-wrapper docutils container" id="id4">
<div class="code-block-caption"><span class="caption-text">Notification handler to record the time response
incoming_val= []
array_storage = []</span><a class="headerlink" href="#id4" title="Link to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>       <span class="k">def</span><span class="w"> </span><span class="nf">notification_handler</span><span class="p">(</span><span class="n">uuid</span><span class="p">,</span> <span class="n">byte_array</span><span class="p">):</span>
           <span class="k">global</span> <span class="n">incoming_val</span><span class="p">,</span> <span class="n">array_storage</span>
           <span class="n">incoming_val</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ble</span><span class="o">.</span><span class="n">bytearray_to_string</span><span class="p">(</span><span class="n">byte_array</span><span class="p">)[:])</span>
           <span class="n">data</span> <span class="o">=</span> <span class="n">ble</span><span class="o">.</span><span class="n">bytearray_to_string</span><span class="p">(</span><span class="n">byte_array</span><span class="p">)</span>
           <span class="n">array_storage</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
           <span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

      <span class="n">ble</span><span class="o">.</span><span class="n">start_notify</span><span class="p">(</span><span class="n">ble</span><span class="o">.</span><span class="n">uuid</span><span class="p">[</span><span class="s1">&#39;RX_STRING&#39;</span><span class="p">],</span> <span class="n">notification_handler</span><span class="p">)</span>

      <span class="c1"># Send GET_TIME_MILLIS Command</span>
      <span class="n">ble</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="n">CMD</span><span class="o">.</span><span class="n">GET_TIME_MILLIS</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</section>
<section id="get-time-millis-loop">
<h4>5. GET_TIME_MILLIS_LOOP<a class="headerlink" href="#get-time-millis-loop" title="Link to this heading"></a></h4>
<p>THE GET_TIME_MILLIS_LOOP loops
This can be used to measure differences in time.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">case</span><span class="w"> </span><span class="no">GET_TIME_MILLIS_LOOP</span><span class="p">:</span>
<span class="w">          </span><span class="kt">double</span><span class="w"> </span><span class="n">t</span><span class="p">;</span>
<span class="w">          </span><span class="n">t</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">double</span><span class="p">)</span><span class="w"> </span><span class="n">millis</span><span class="p">();</span>
<span class="w">          </span><span class="k">while</span><span class="w"> </span><span class="p">((</span><span class="kt">double</span><span class="p">)</span><span class="n">millis</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">1000</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="n">tx_estring_value</span><span class="p">.</span><span class="n">clear</span><span class="p">();</span>
<span class="w">              </span><span class="n">tx_estring_value</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;Time: &quot;</span><span class="p">);</span>
<span class="w">              </span><span class="n">tx_estring_value</span><span class="p">.</span><span class="n">append</span><span class="p">((</span><span class="kt">double</span><span class="p">)</span><span class="n">millis</span><span class="p">());</span>
<span class="w">              </span><span class="n">tx_characteristic_string</span><span class="p">.</span><span class="n">writeValue</span><span class="p">(</span><span class="n">tx_estring_value</span><span class="p">.</span><span class="n">c_str</span><span class="p">());</span>
<span class="w">           </span><span class="p">}</span>
<span class="w">          </span><span class="k">break</span><span class="p">;</span>
</pre></div>
</div>
<a class="bottompadding image-border reference internal image-reference" href="../_images/get_time_millis_and_loop.png"><img alt="../_images/get_time_millis_and_loop.png" class="bottompadding image-border align-center" src="../_images/get_time_millis_and_loop.png" style="width: 50%;" />
</a>
<p>The photo above shows the commands GET_TIME_MILLIS_LOOP being executed.</p>
</section>
<section id="send-time-data">
<h4>6. SEND_TIME_DATA<a class="headerlink" href="#send-time-data" title="Link to this heading"></a></h4>
<p>I then wrote a command SEND_TIME_DATA that sent the time data back.</p>
<div class="literal-block-wrapper docutils container" id="id5">
<div class="code-block-caption"><span class="caption-text">Case Statements for  <code class="docutils literal notranslate"><span class="pre">SEND_TIME_DATA</span></code></span><a class="headerlink" href="#id5" title="Link to this code"></a></div>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="w">   </span><span class="k">case</span><span class="w"> </span><span class="no">SEND_TIME_DATA</span><span class="p">:</span>
<span class="w">             </span><span class="kt">float</span><span class="w"> </span><span class="n">time_array</span><span class="p">[</span><span class="mi">20</span><span class="p">];</span>
<span class="w">             </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">20</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                   </span><span class="n">time_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="n">millis</span><span class="p">();</span>
<span class="w">               </span><span class="p">}</span>

<span class="w">             </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">20</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                   </span><span class="n">tx_estring_value</span><span class="p">.</span><span class="n">clear</span><span class="p">();</span>
<span class="w">                   </span><span class="n">tx_estring_value</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;Time: &quot;</span><span class="p">);</span>
<span class="w">                   </span><span class="n">tx_estring_value</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">time_array</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
<span class="w">                   </span><span class="n">tx_estring_value</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;s&quot;</span><span class="p">);</span>
<span class="w">                   </span><span class="n">tx_characteristic_string</span><span class="p">.</span><span class="n">writeValue</span><span class="p">(</span><span class="n">tx_estring_value</span><span class="p">.</span><span class="n">c_str</span><span class="p">());</span>
<span class="w">               </span><span class="p">}</span>
<span class="w">             </span><span class="k">break</span><span class="p">;</span>
</pre></div>
</div>
</div>
<a class="bottompadding image-border reference internal image-reference" href="../_images/sendtimedata.png"><img alt="../_images/sendtimedata.png" class="bottompadding image-border align-center" src="../_images/sendtimedata.png" style="width: 50%;" />
</a>
<p>The photo above shows the SEND_TIME_DATA command in action</p>
</section>
<section id="get-temp-readings">
<h4>7. GET_TEMP_READINGS<a class="headerlink" href="#get-temp-readings" title="Link to this heading"></a></h4>
<p>I wrote GET_TEMP_READINGS that records both time and temperature and can be easily parsed.</p>
<div class="literal-block-wrapper docutils container" id="id6">
<div class="code-block-caption"><span class="caption-text">Case Statements for <code class="docutils literal notranslate"><span class="pre">GET_TEMP_READINGS</span></code></span><a class="headerlink" href="#id6" title="Link to this code"></a></div>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">case</span><span class="w"> </span><span class="no">GET_TEMP_READINGS</span><span class="p">:</span>
<span class="w">           </span><span class="c1">//setup code has been redacted for purposes of not posting unncessary code</span>
<span class="w">         </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">20</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">               </span><span class="n">tx_estring_value</span><span class="p">.</span><span class="n">clear</span><span class="p">();</span>
<span class="w">               </span><span class="n">tx_estring_value</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;Time: &quot;</span><span class="p">);</span>
<span class="w">               </span><span class="n">tx_estring_value</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">time_array1</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
<span class="w">               </span><span class="n">tx_estring_value</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;s Temp: &quot;</span><span class="p">);</span>
<span class="w">               </span><span class="n">tx_estring_value</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">temp_array</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
<span class="w">               </span><span class="n">tx_estring_value</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot; degrees &quot;</span><span class="p">);</span>
<span class="w">               </span><span class="n">tx_characteristic_string</span><span class="p">.</span><span class="n">writeValue</span><span class="p">(</span><span class="n">tx_estring_value</span><span class="p">.</span><span class="n">c_str</span><span class="p">());</span>
<span class="w">         </span><span class="p">}</span>
<span class="w">         </span><span class="k">break</span><span class="p">;</span>
</pre></div>
</div>
</div>
<p>My notification handler broke when I added SEND_TEMP_DATA and GET_TEMP_READINGS, so I went back to reevaluate it as it was repeating weirdly.
While I never figured out exactly what it was, I simplified it and redid it to print general statements.</p>
<a class="bottompadding image-border reference internal image-reference" href="../_images/gettemp.png"><img alt="../_images/gettemp.png" class="bottompadding image-border align-center" src="../_images/gettemp.png" style="width: 50%;" />
</a>
<p>The photo above shows the GET_TEMP_READINGS command in action</p>
</section>
<section id="lab-question">
<h4>8. LAB QUESTION<a class="headerlink" href="#lab-question" title="Link to this heading"></a></h4>
<p>I have two methods to collect and store data: incrementally using GET_TIME_MILLIS or in batches with the note and send data commands. Each approach has its own advantages and disadvantages. Using GET_TIME_MILLIS introduces significant delays between readings due to BLE communication, whereas recording data in batches runs in a loop on the Artemis, bypassing BLE latency and allowing for much faster iterations. With GET_TIME_MILLIS, I receive immediate feedback from sensors, which can be useful for debugging, while recording data in batches and sending it later introduces a delay between the initial request and data reception. In terms of storage, GET_TIME_MILLIS requires minimal, temporary storage to collect and send data immediately, but batch storage necessitates storing all data first, demanding significantly more memory. The approximate upper limit is 384kB of RAM; if I store only time (4B per reading), I can record up to 98,304 readings, while storing both time and temperature cuts this to 49,152 readings. If storage becomes a limitation, I may need to repeat batch recordings by overwriting previous data or reduce the sampling frequency to extend the data collection period.</p>
</section>
</section>
</section>
<section id="reflection">
<h2><a class="toc-backref" href="#id16" role="doc-backlink">Reflection</a><a class="headerlink" href="#reflection" title="Link to this heading"></a></h2>
<p>Communication is crucial in order to figure out what is happening. This lab seemed to be focused on getting settled with the board and establishing communication with it.
I struggled with getting set up only to realize that my bluetooth was not on.  It also took me embarassingly long to realize that I did not update my commands properly.</p>
<a class="bottompadding image-border reference internal image-reference" href="../_images/commandupdates.png"><img alt="../_images/commandupdates.png" class="bottompadding image-border align-center" src="../_images/commandupdates.png" style="width: 50%;" />
</a>
</section>
<section id="acknowledgements">
<h2><a class="toc-backref" href="#id17" role="doc-backlink">Acknowledgements</a><a class="headerlink" href="#acknowledgements" title="Link to this heading"></a></h2>
<p>Thanks to all the staff and the professor for helping in lab. I referenced the webpages of past students: Mikayla Lahr, Nidhi Sonwalkar, Kofi Ohene Adu, Minh Nguyen, and Daria Kot.
I also had ChatGPT proof read this webpage and shorten my writing in areas where I was too wordy.
Shout out to Aidan McNay for sitting with me and teaching me about Sphinx and helping me build a test repo for this class(before I publish to this actual page)</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../" class="btn btn-neutral float-left" title="Fast Robots ECE 4160" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Nita Kattimani.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>